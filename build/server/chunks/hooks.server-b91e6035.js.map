{"version":3,"file":"hooks.server-b91e6035.js","sources":["../../../.svelte-kit/adapter-node/chunks/hooks.server.js"],"sourcesContent":["import { D as DEV } from \"./prod-ssr.js\";\nimport { d as private_env } from \"./internal.js\";\nimport { Auth } from \"@auth/core\";\nimport GitHub from \"@auth/core/providers/github\";\nconst dev = DEV;\nasync function getSession(req, config) {\n  config.secret ??= private_env.AUTH_SECRET;\n  config.trustHost ??= true;\n  const url = new URL(\"/api/auth/session\", req.url);\n  const request = new Request(url, { headers: req.headers });\n  const response = await Auth(request, config);\n  const { status = 200 } = response;\n  const data = await response.json();\n  if (!data || !Object.keys(data).length)\n    return null;\n  if (status === 200)\n    return data;\n  throw new Error(data.message);\n}\nconst actions = [\n  \"providers\",\n  \"session\",\n  \"csrf\",\n  \"signin\",\n  \"signout\",\n  \"callback\",\n  \"verify-request\",\n  \"error\"\n];\nfunction AuthHandle(svelteKitAuthOptions) {\n  return async function({ event, resolve }) {\n    const authOptions = typeof svelteKitAuthOptions === \"object\" ? svelteKitAuthOptions : await svelteKitAuthOptions(event);\n    const { prefix = \"/auth\" } = authOptions;\n    const { url, request } = event;\n    event.locals.getSession ??= () => getSession(request, authOptions);\n    const action = url.pathname.slice(prefix.length + 1).split(\"/\")[0];\n    if (!actions.includes(action) || !url.pathname.startsWith(prefix + \"/\")) {\n      return resolve(event);\n    }\n    return Auth(request, authOptions);\n  };\n}\nfunction SvelteKitAuth(options) {\n  if (typeof options === \"object\") {\n    options.secret ??= private_env.AUTH_SECRET;\n    options.trustHost ??= !!(private_env.AUTH_TRUST_HOST ?? private_env.VERCEL ?? dev);\n  }\n  return AuthHandle(options);\n}\nconst GITHUB_ID = \"fac7e4467f123f25d538\";\nconst GITHUB_SECRET = \"5bd9def0a8c2c0425422ba92b48d7e2083822e21\";\nconst handle = SvelteKitAuth({\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  providers: [GitHub({ clientId: GITHUB_ID, clientSecret: GITHUB_SECRET })],\n  trustHost: true\n});\nexport {\n  handle\n};\n"],"names":[],"mappings":"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"}